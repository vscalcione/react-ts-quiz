{"version":3,"file":"react-query.development.js","sources":["../src/core/utils.js","../src/core/config.js","../src/core/queryCache.js","../src/core/setFocusHandler.js","../src/react/ReactQueryCacheProvider.js","../src/react/ReactQueryConfigProvider.js","../src/react/utils.js","../src/react/useIsFetching.js","../src/react/useMutation.js","../src/react/useBaseQuery.js","../src/react/useQuery.js","../src/react/usePaginatedQuery.js","../src/react/useInfiniteQuery.js"],"sourcesContent":["export const statusIdle = 'idle'\nexport const statusLoading = 'loading'\nexport const statusError = 'error'\nexport const statusSuccess = 'success'\n\nlet _uid = 0\nexport const uid = () => _uid++\nexport const cancelledError = {}\nexport let globalStateListeners = []\nexport const isServer = typeof window === 'undefined'\nexport function noop() {\n  return void 0\n}\nexport function identity(d) {\n  return d\n}\nexport let Console = console || { error: noop, warn: noop, log: noop }\n\nexport function setConsole(c) {\n  Console = c\n}\n\nexport function functionalUpdate(updater, old) {\n  return typeof updater === 'function' ? updater(old) : updater\n}\n\nexport function stableStringifyReplacer(_, value) {\n  return isObject(value)\n    ? Object.assign(\n        {},\n        ...Object.keys(value)\n          .sort()\n          .map(key => ({\n            [key]: value[key],\n          }))\n      )\n    : value\n}\n\nexport function stableStringify(obj) {\n  return JSON.stringify(obj, stableStringifyReplacer)\n}\n\nexport function isObject(a) {\n  return a && typeof a === 'object' && !Array.isArray(a)\n}\n\nexport function deepIncludes(a, b) {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (typeof a === 'object') {\n    return !Object.keys(b).some(key => !deepIncludes(a[key], b[key]))\n  }\n\n  return false\n}\n\nexport function isDocumentVisible() {\n  return (\n    typeof document === 'undefined' ||\n    document.visibilityState === undefined ||\n    document.visibilityState === 'visible' ||\n    document.visibilityState === 'prerender'\n  )\n}\n\nexport function isOnline() {\n  return navigator.onLine === undefined || navigator.onLine\n}\n\nexport function getQueryArgs(args) {\n  if (isObject(args[0])) {\n    const { queryKey, queryFn, config } = args[0]\n    args = [queryKey, queryFn, config, ...args.slice(1)]\n  } else if (isObject(args[1])) {\n    const [queryKey, config, ...rest] = args\n    args = [queryKey, undefined, config, ...rest]\n  }\n\n  let [queryKey, queryFn, config = {}, ...rest] = args\n\n  queryFn = queryFn || config.queryFn\n\n  return [queryKey, queryFn ? { ...config, queryFn } : config, ...rest]\n}\n\n// This deep-equal is directly based on https://github.com/epoberezkin/fast-deep-equal.\n// The parts for comparing any non-JSON-supported values has been removed\nexport function deepEqual(a, b) {\n  if (a === b) return true\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var length, i, keys\n    if (Array.isArray(a)) {\n      length = a.length\n      // eslint-disable-next-line eqeqeq\n      if (length != b.length) return false\n      for (i = length; i-- !== 0; ) if (!deepEqual(a[i], b[i])) return false\n      return true\n    }\n\n    if (a.valueOf !== Object.prototype.valueOf)\n      return a.valueOf() === b.valueOf()\n\n    keys = Object.keys(a)\n    length = keys.length\n    if (length !== Object.keys(b).length) return false\n\n    for (i = length; i-- !== 0; )\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\n\n    for (i = length; i-- !== 0; ) {\n      var key = keys[i]\n\n      if (!deepEqual(a[key], b[key])) return false\n    }\n\n    return true\n  }\n\n  // true if both NaN, false otherwise\n  // eslint-disable-next-line no-self-compare\n  return a !== a && b !== b\n}\n\nexport function getStatusBools(status) {\n  return {\n    isLoading: status === statusLoading,\n    isSuccess: status === statusSuccess,\n    isError: status === statusError,\n    isIdle: status === statusIdle,\n  }\n}\n","import { noop, stableStringify, identity, deepEqual } from './utils'\n\nexport const DEFAULT_CONFIG = {\n  shared: {\n    suspense: false,\n  },\n  queries: {\n    queryKeySerializerFn: defaultQueryKeySerializerFn,\n    queryFn: undefined,\n    initialStale: undefined,\n    enabled: true,\n    retry: 3,\n    retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000),\n    staleTime: 0,\n    cacheTime: 5 * 60 * 1000,\n    refetchOnWindowFocus: true,\n    refetchInterval: false,\n    queryFnParamsFilter: identity,\n    refetchOnMount: true,\n    isDataEqual: deepEqual,\n    onError: noop,\n    onSuccess: noop,\n    onSettled: noop,\n    useErrorBoundary: false,\n  },\n  mutations: {\n    throwOnError: false,\n    onMutate: noop,\n    onError: noop,\n    onSuccess: noop,\n    onSettled: noop,\n    useErrorBoundary: false,\n  },\n}\n\nexport const defaultConfigRef = {\n  current: DEFAULT_CONFIG,\n}\n\nexport function defaultQueryKeySerializerFn(queryKey) {\n  if (!queryKey) {\n    invalidQueryKey()\n  }\n\n  if (!Array.isArray(queryKey)) {\n    queryKey = [queryKey]\n  }\n\n  if (queryKey.some(d => typeof d === 'function')) {\n    invalidQueryKey()\n  }\n\n  const queryHash = stableStringify(queryKey)\n  queryKey = JSON.parse(queryHash)\n\n  if (!queryHash) {\n    invalidQueryKey()\n  }\n\n  return [queryHash, queryKey]\n}\n\nfunction invalidQueryKey() {\n  throw new Error('A valid query key is required!')\n}\n","import {\n  isServer,\n  functionalUpdate,\n  cancelledError,\n  isDocumentVisible,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  getQueryArgs,\n  deepIncludes,\n  noop,\n  uid,\n  statusIdle,\n  Console,\n  isObject,\n  getStatusBools,\n} from './utils'\n\nimport { defaultConfigRef } from './config'\n\nexport const queryCache = makeQueryCache()\n\nexport const queryCaches = [queryCache]\n\nconst actionInit = 'Init'\nconst actionFailed = 'Failed'\nconst actionMarkStale = 'MarkStale'\nconst actionMarkGC = 'MarkGC'\nconst actionFetch = 'Fetch'\nconst actionSuccess = 'Success'\nconst actionError = 'Error'\nconst actionSetState = 'SetState'\n\nexport function makeQueryCache({ frozen = isServer, defaultConfig } = {}) {\n  // A frozen cache does not add new queries to the cache\n  const globalListeners = []\n\n  const configRef = defaultConfig\n    ? { current: defaultConfig }\n    : defaultConfigRef\n\n  const queryCache = {\n    queries: {},\n    isFetching: 0,\n  }\n\n  const notifyGlobalListeners = () => {\n    queryCache.isFetching = Object.values(queryCache.queries).reduce(\n      (acc, query) => (query.state.isFetching ? acc + 1 : acc),\n      0\n    )\n\n    globalListeners.forEach(d => d(queryCache))\n  }\n\n  queryCache.subscribe = cb => {\n    globalListeners.push(cb)\n    return () => {\n      globalListeners.splice(globalListeners.indexOf(cb), 1)\n    }\n  }\n\n  queryCache.clear = ({ notify = true } = {}) => {\n    Object.values(queryCache.queries).forEach(query => query.clear())\n    queryCache.queries = {}\n    if (notify) {\n      notifyGlobalListeners()\n    }\n  }\n\n  queryCache.getQueries = (predicate, { exact } = {}) => {\n    if (predicate === true) {\n      return Object.values(queryCache.queries)\n    }\n\n    if (typeof predicate !== 'function') {\n      const [\n        queryHash,\n        queryKey,\n      ] = configRef.current.queries.queryKeySerializerFn(predicate)\n\n      predicate = d =>\n        exact ? d.queryHash === queryHash : deepIncludes(d.queryKey, queryKey)\n    }\n\n    return Object.values(queryCache.queries).filter(predicate)\n  }\n\n  queryCache.getQuery = queryKey =>\n    queryCache.getQueries(queryKey, { exact: true })[0]\n\n  queryCache.getQueryData = queryKey =>\n    queryCache.getQuery(queryKey)?.state.data\n\n  queryCache.removeQueries = (...args) => {\n    queryCache.getQueries(...args).forEach(query => query.clear())\n  }\n\n  queryCache.cancelQueries = (...args) => {\n    queryCache.getQueries(...args).forEach(query => query.cancel())\n  }\n\n  queryCache.invalidateQueries = async (\n    predicate,\n    { refetchActive = true, refetchInactive = false, exact, throwOnError } = {}\n  ) => {\n    try {\n      return await Promise.all(\n        queryCache.getQueries(predicate, { exact }).map(query => {\n          if (query.instances.length) {\n            if (\n              refetchActive &&\n              query.instances.some(instance => instance.config.enabled)\n            ) {\n              return query.fetch()\n            }\n          } else {\n            if (refetchInactive) {\n              return query.fetch()\n            }\n          }\n\n          return query.invalidate()\n        })\n      )\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n    }\n  }\n\n  queryCache.resetErrorBoundaries = () => {\n    queryCache.getQueries(true).forEach(query => {\n      query.state.throwInErrorBoundary = false\n    })\n  }\n\n  queryCache.buildQuery = (userQueryKey, config = {}) => {\n    config = {\n      ...configRef.current.shared,\n      ...configRef.current.queries,\n      ...config,\n    }\n\n    let [queryHash, queryKey] = config.queryKeySerializerFn(userQueryKey)\n\n    let query = queryCache.queries[queryHash]\n\n    if (query) {\n      Object.assign(query, { config })\n    } else {\n      query = makeQuery({\n        queryCache,\n        queryKey,\n        queryHash,\n        config,\n      })\n\n      if (config.infinite) {\n        if (\n          typeof query.state.canFetchMore === 'undefined' &&\n          typeof query.state.data !== 'undefined'\n        ) {\n          query.state.canFetchMore = config.getFetchMore(\n            query.state.data[query.state.data.length - 1],\n            query.state.data\n          )\n        }\n\n        // Here we seed the pageVariabes for the query\n        if (!query.pageVariables) {\n          query.pageVariables = [[...query.queryKey]]\n        }\n      }\n\n      // If the query started with data, schedule\n      // a stale timeout\n      if (!isServer && query.state.data) {\n        query.scheduleStaleTimeout()\n\n        // Simulate a query healing process\n        query.heal()\n        // Schedule for garbage collection in case\n        // nothing subscribes to this query\n        query.scheduleGarbageCollection()\n      }\n\n      if (!frozen) {\n        queryCache.queries[queryHash] = query\n\n        if (isServer) {\n          notifyGlobalListeners()\n        } else {\n          // Here, we setTimeout so as to not trigger\n          // any setState's in parent components in the\n          // middle of the render phase.\n          setTimeout(() => {\n            notifyGlobalListeners()\n          })\n        }\n      }\n    }\n\n    query.fallbackInstance = {\n      config: {\n        onSuccess: query.config.onSuccess,\n        onError: query.config.onError,\n        onSettled: query.config.onSettled,\n      },\n    }\n\n    return query\n  }\n\n  queryCache.prefetchQuery = async (...args) => {\n    if (\n      isObject(args[1]) &&\n      (args[1].hasOwnProperty('throwOnError') ||\n        args[1].hasOwnProperty('force'))\n    ) {\n      args[3] = args[1]\n      args[1] = undefined\n      args[2] = undefined\n    }\n\n    let [queryKey, config, { force, throwOnError } = {}] = getQueryArgs(args)\n\n    try {\n      const query = queryCache.buildQuery(queryKey, config)\n      if (force || query.state.isStale) {\n        await query.fetch()\n      }\n      return query.state.data\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n      Console.error(err)\n    }\n  }\n\n  queryCache.setQueryData = (queryKey, updater, config = {}) => {\n    let query = queryCache.getQuery(queryKey)\n\n    if (!query) {\n      query = queryCache.buildQuery(queryKey, config)\n    }\n\n    query.setData(updater)\n  }\n\n  function makeQuery({ queryCache, queryKey, queryHash, config }) {\n    const initialData =\n      typeof config.initialData === 'function'\n        ? config.initialData()\n        : config.initialData\n\n    const hasInitialData = typeof initialData !== 'undefined'\n\n    const isStale =\n      !config.enabled ||\n      (typeof config.initialStale === 'function'\n        ? config.initialStale()\n        : config.initialStale ?? !hasInitialData)\n\n    const initialStatus = hasInitialData\n      ? statusSuccess\n      : config.enabled\n      ? statusLoading\n      : statusIdle\n\n    let query = {\n      queryKey,\n      queryHash,\n      config,\n      instances: [],\n      state: queryReducer(undefined, {\n        type: actionInit,\n        initialStatus,\n        initialData,\n        hasInitialData,\n        isStale,\n      }),\n    }\n\n    query.dispatch = action => {\n      query.state = queryReducer(query.state, action)\n      query.instances.forEach(d => d.onStateUpdate(query.state))\n      notifyGlobalListeners()\n    }\n\n    query.scheduleStaleTimeout = () => {\n      if (isServer) return\n      clearTimeout(query.staleTimeout)\n\n      if (query.config.staleTime === Infinity) {\n        return\n      }\n\n      query.staleTimeout = setTimeout(() => {\n        if (queryCache.getQuery(query.queryKey)) {\n          query.invalidate()\n        }\n      }, query.config.staleTime)\n    }\n\n    query.invalidate = () => {\n      clearTimeout(query.staleTimeout)\n      query.dispatch({ type: actionMarkStale })\n    }\n\n    query.scheduleGarbageCollection = () => {\n      if (!queryCache.queries[query.queryHash]) return\n      if (query.config.cacheTime === Infinity) {\n        return\n      }\n      query.dispatch({ type: actionMarkGC })\n      query.cacheTimeout = setTimeout(\n        () => {\n          queryCache.removeQueries(\n            d =>\n              d.state.markedForGarbageCollection &&\n              d.queryHash === query.queryHash\n          )\n        },\n        typeof query.state.data === 'undefined' &&\n          query.state.status !== 'error'\n          ? 0\n          : query.config.cacheTime\n      )\n    }\n\n    query.refetch = async () => {\n      try {\n        await query.fetch()\n      } catch (error) {\n        Console.error(error)\n      }\n    }\n\n    query.heal = () => {\n      // Stop the query from being garbage collected\n      clearTimeout(query.cacheTimeout)\n\n      // Mark the query as not cancelled\n      query.cancelled = null\n    }\n\n    query.cancel = () => {\n      query.cancelled = cancelledError\n\n      if (query.cancelPromises) {\n        query.cancelPromises()\n      }\n\n      delete query.promise\n    }\n\n    query.clearIntervals = () => {\n      query.instances.forEach(instance => {\n        instance.clearInterval()\n      })\n    }\n\n    query.setState = updater =>\n      query.dispatch({ type: actionSetState, updater })\n\n    query.setData = updater => {\n      // Set data and mark it as cached\n      query.dispatch({ type: actionSuccess, updater })\n\n      // Schedule a fresh invalidation!\n      query.scheduleStaleTimeout()\n    }\n\n    query.clear = () => {\n      clearTimeout(query.staleTimeout)\n      clearTimeout(query.cacheTimeout)\n      clearTimeout(query.retryTimeout)\n      query.clearIntervals()\n      query.cancel()\n      query.dispatch = noop\n      delete queryCache.queries[query.queryHash]\n    }\n\n    query.subscribe = (onStateUpdate = noop) => {\n      const instance = {\n        id: uid(),\n        onStateUpdate,\n      }\n\n      query.instances.push(instance)\n\n      query.heal()\n\n      instance.clearInterval = () => {\n        clearInterval(instance.refetchIntervalId)\n        delete instance.refetchIntervalId\n      }\n\n      instance.updateConfig = config => {\n        const oldConfig = instance.config\n\n        // Update the config\n        instance.config = config\n\n        if (!isServer) {\n          if (oldConfig?.refetchInterval === config.refetchInterval) {\n            return\n          }\n\n          query.clearIntervals()\n\n          const minInterval = Math.min(\n            ...query.instances.map(d => d.config.refetchInterval || Infinity)\n          )\n\n          if (\n            !instance.refetchIntervalId &&\n            minInterval > 0 &&\n            minInterval < Infinity\n          ) {\n            instance.refetchIntervalId = setInterval(() => {\n              if (\n                query.instances.some(instance => instance.config.enabled) &&\n                (isDocumentVisible() ||\n                  query.instances.some(\n                    instance => instance.config.refetchIntervalInBackground\n                  ))\n              ) {\n                query.fetch()\n              }\n            }, minInterval)\n          }\n        }\n      }\n\n      instance.run = async () => {\n        try {\n          // Perform the refetch for this query if necessary\n          if (\n            query.config.enabled && // Don't auto refetch if disabled\n            !query.wasSuspended && // Don't double refetch for suspense\n            query.state.isStale && // Only refetch if stale\n            (query.config.refetchOnMount || query.instances.length === 1)\n          ) {\n            await query.fetch()\n          }\n\n          query.wasSuspended = false\n        } catch (error) {\n          Console.error(error)\n        }\n      }\n\n      instance.unsubscribe = () => {\n        query.instances = query.instances.filter(d => d.id !== instance.id)\n\n        if (!query.instances.length) {\n          query.clearIntervals()\n          query.cancel()\n\n          if (!isServer) {\n            // Schedule garbage collection\n            query.scheduleGarbageCollection()\n          }\n        }\n      }\n\n      return instance\n    }\n\n    // Set up the core fetcher function\n    const tryFetchData = async (fn, ...args) => {\n      try {\n        // Perform the query\n        const promise = fn(...query.config.queryFnParamsFilter(args))\n\n        query.cancelPromises = () => promise.cancel?.()\n\n        const data = await promise\n        delete query.shouldContinueRetryOnFocus\n\n        delete query.cancelPromises\n        if (query.cancelled) throw query.cancelled\n\n        return data\n      } catch (error) {\n        delete query.cancelPromises\n        if (query.cancelled) throw query.cancelled\n\n        // If we fail, increase the failureCount\n        query.dispatch({ type: actionFailed })\n\n        // Do we need to retry the request?\n        if (\n          query.config.retry === true ||\n          query.state.failureCount <= query.config.retry ||\n          (typeof query.config.retry === 'function' &&\n            query.config.retry(query.state.failureCount, error))\n        ) {\n          // Only retry if the document is visible\n          if (!isDocumentVisible()) {\n            // set this flag to continue retries on focus\n            query.shouldContinueRetryOnFocus = true\n            return new Promise(noop)\n          }\n\n          delete query.shouldContinueRetryOnFocus\n\n          // Determine the retryDelay\n          const delay = functionalUpdate(\n            query.config.retryDelay,\n            query.state.failureCount\n          )\n\n          // Return a new promise with the retry\n          return await new Promise((resolve, reject) => {\n            // Keep track of the retry timeout\n            query.retryTimeout = setTimeout(async () => {\n              if (query.cancelled) return reject(query.cancelled)\n\n              try {\n                const data = await tryFetchData(fn, ...args)\n                if (query.cancelled) return reject(query.cancelled)\n                resolve(data)\n              } catch (error) {\n                if (query.cancelled) return reject(query.cancelled)\n                reject(error)\n              }\n            }, delay)\n          })\n        }\n\n        throw error\n      }\n    }\n\n    query.fetch = async ({ fetchMore } = {}) => {\n      let queryFn = query.config.queryFn\n\n      if (!queryFn) {\n        return\n      }\n\n      if (query.config.infinite) {\n        const originalQueryFn = queryFn\n\n        queryFn = async () => {\n          const data = []\n          const pageVariables = [...query.pageVariables]\n          const rebuiltPageVariables = []\n\n          do {\n            const args = pageVariables.shift()\n\n            if (!data.length) {\n              // the first page query doesn't need to be rebuilt\n              data.push(await originalQueryFn(...args))\n              rebuiltPageVariables.push(args)\n            } else {\n              // get an up-to-date cursor based on the previous data set\n\n              const nextCursor = query.config.getFetchMore(\n                data[data.length - 1],\n                data\n              )\n\n              // break early if there's no next cursor\n              // otherwise we'll start from the beginning\n              // which will cause unwanted duplication\n              if (!nextCursor) {\n                break\n              }\n\n              const pageArgs = [\n                // remove the last argument (the previously saved cursor)\n                ...args.slice(0, -1),\n                nextCursor,\n              ]\n\n              data.push(await originalQueryFn(...pageArgs))\n              rebuiltPageVariables.push(pageArgs)\n            }\n          } while (pageVariables.length)\n\n          query.state.canFetchMore = query.config.getFetchMore(\n            data[data.length - 1],\n            data\n          )\n          query.pageVariables = rebuiltPageVariables\n\n          return data\n        }\n\n        if (fetchMore) {\n          queryFn = async (...args) => {\n            const { fetchMoreInfo, previous } = fetchMore\n            try {\n              query.setState(old => ({\n                ...old,\n                isFetchingMore: previous ? 'previous' : 'next',\n              }))\n\n              const newArgs = [...args, fetchMoreInfo]\n\n              query.pageVariables[previous ? 'unshift' : 'push'](newArgs)\n\n              const newData = await originalQueryFn(...newArgs)\n\n              const data = previous\n                ? [newData, ...query.state.data]\n                : [...query.state.data, newData]\n\n              query.state.canFetchMore = query.config.getFetchMore(\n                newData,\n                data\n              )\n\n              return data\n            } finally {\n              query.setState(old => ({\n                ...old,\n                isFetchingMore: false,\n              }))\n            }\n          }\n        }\n      }\n\n      // Create a new promise for the query cache if necessary\n      if (!query.promise) {\n        query.promise = (async () => {\n          // If there are any retries pending for this query, kill them\n          query.cancelled = null\n\n          const getCallbackInstances = () => {\n            const callbackInstances = [...query.instances]\n\n            if (query.wasSuspended) {\n              callbackInstances.unshift(query.fallbackInstance)\n            }\n            return callbackInstances\n          }\n\n          try {\n            // Set up the query refreshing state\n            query.dispatch({ type: actionFetch })\n\n            // Try to get the data\n            let data = await tryFetchData(queryFn, ...query.queryKey)\n\n            query.setData(old =>\n              query.config.isDataEqual(old, data) ? old : data\n            )\n\n            getCallbackInstances().forEach(\n              instance =>\n                instance.config.onSuccess &&\n                instance.config.onSuccess(query.state.data)\n            )\n\n            getCallbackInstances().forEach(\n              instance =>\n                instance.config.onSettled &&\n                instance.config.onSettled(query.state.data, null)\n            )\n\n            delete query.promise\n\n            return data\n          } catch (error) {\n            query.dispatch({\n              type: actionError,\n              cancelled: error === query.cancelled,\n              error,\n            })\n\n            delete query.promise\n\n            if (error !== query.cancelled) {\n              getCallbackInstances().forEach(\n                instance =>\n                  instance.config.onError && instance.config.onError(error)\n              )\n\n              getCallbackInstances().forEach(\n                instance =>\n                  instance.config.onSettled &&\n                  instance.config.onSettled(undefined, error)\n              )\n\n              throw error\n            }\n          }\n        })()\n      }\n\n      return query.promise\n    }\n\n    if (query.config.infinite) {\n      query.fetchMore = (\n        fetchMoreInfo = query.state.canFetchMore,\n        { previous = false } = {}\n      ) => query.fetch({ fetchMore: { fetchMoreInfo, previous } })\n    }\n\n    return query\n  }\n\n  return queryCache\n}\n\nexport function queryReducer(state, action) {\n  const newState = switchActions(state, action)\n\n  return Object.assign(newState, getStatusBools(newState.status))\n}\n\nfunction switchActions(state, action) {\n  switch (action.type) {\n    case actionInit:\n      return {\n        status: action.initialStatus,\n        error: null,\n        isFetching: action.initialStatus === 'loading',\n        failureCount: 0,\n        isStale: action.isStale,\n        markedForGarbageCollection: false,\n        data: action.initialData,\n        updatedAt: action.hasInitialData ? Date.now() : 0,\n      }\n    case actionFailed:\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case actionMarkStale:\n      return {\n        ...state,\n        isStale: true,\n      }\n    case actionMarkGC: {\n      return {\n        ...state,\n        markedForGarbageCollection: true,\n      }\n    }\n    case actionFetch:\n      return {\n        ...state,\n        status:\n          typeof state.data !== 'undefined' ? statusSuccess : statusLoading,\n        isFetching: true,\n        failureCount: 0,\n      }\n    case actionSuccess:\n      return {\n        ...state,\n        status: statusSuccess,\n        data: functionalUpdate(action.updater, state.data),\n        error: null,\n        isStale: false,\n        isFetching: false,\n        updatedAt: Date.now(),\n        failureCount: 0,\n      }\n    case actionError:\n      return {\n        ...state,\n        isFetching: false,\n        isStale: true,\n        ...(!action.cancelled && {\n          status: statusError,\n          error: action.error,\n          throwInErrorBoundary: true,\n        }),\n      }\n    case actionSetState:\n      return functionalUpdate(action.updater, state)\n    default:\n      throw new Error()\n  }\n}\n","import { isOnline, isDocumentVisible, Console, isServer } from './utils'\nimport { queryCaches } from './queryCache'\n\nconst visibilityChangeEvent = 'visibilitychange'\nconst focusEvent = 'focus'\n\nconst onWindowFocus = () => {\n  if (isDocumentVisible() && isOnline()) {\n    queryCaches.forEach(queryCache =>\n      queryCache\n        .invalidateQueries(query => {\n          if (!query.instances.length) {\n            return false\n          }\n\n          if (!query.instances.some(instance => instance.config.enabled)) {\n            return false\n          }\n\n          if (!query.state.isStale) {\n            return false\n          }\n\n          if (query.shouldContinueRetryOnFocus) {\n            // delete promise, so refetching will create new one\n            delete query.promise\n          }\n\n          return query.config.refetchOnWindowFocus\n        })\n        .catch(Console.error)\n    )\n  }\n}\n\nlet removePreviousHandler\n\nexport function setFocusHandler(callback) {\n  // Unsub the old watcher\n  if (removePreviousHandler) {\n    removePreviousHandler()\n  }\n  // Sub the new watcher\n  removePreviousHandler = callback(onWindowFocus)\n}\n\nsetFocusHandler(handleFocus => {\n  // Listen to visibillitychange and focus\n  if (!isServer && window?.addEventListener) {\n    window.addEventListener(visibilityChangeEvent, handleFocus, false)\n    window.addEventListener(focusEvent, handleFocus, false)\n\n    return () => {\n      // Be sure to unsubscribe if a new handler is set\n      window.removeEventListener(visibilityChangeEvent, handleFocus)\n      window.removeEventListener(focusEvent, handleFocus)\n    }\n  }\n})\n","import React from 'react'\nimport { queryCache, makeQueryCache } from '../core'\n\nexport const queryCacheContext = React.createContext(queryCache)\n\nexport const queryCaches = [queryCache]\n\nexport const useQueryCache = () => React.useContext(queryCacheContext)\n\nexport function ReactQueryCacheProvider({ queryCache, children }) {\n  const resolvedQueryCache = React.useMemo(\n    () => queryCache || makeQueryCache(),\n    [queryCache]\n  )\n\n  React.useEffect(() => {\n    queryCaches.push(resolvedQueryCache)\n\n    return () => {\n      // remove the cache from the active list\n      const i = queryCaches.indexOf(resolvedQueryCache)\n      if (i > -1) {\n        queryCaches.splice(i, 1)\n      }\n      // if the resolvedQueryCache was created by us, we need to tear it down\n      if (queryCache == null) {\n        resolvedQueryCache.clear()\n      }\n    }\n  }, [resolvedQueryCache, queryCache])\n\n  return (\n    <queryCacheContext.Provider value={resolvedQueryCache}>\n      {children}\n    </queryCacheContext.Provider>\n  )\n}\n","import React from 'react'\nimport { DEFAULT_CONFIG, defaultConfigRef } from '../core/config'\n\n//\n\nconst configContext = React.createContext()\n\nexport function useConfigContext() {\n  return React.useContext(configContext) || defaultConfigRef.current\n}\n\nexport function ReactQueryConfigProvider({ config, children }) {\n  let configContextValue = useConfigContext()\n\n  const newConfig = React.useMemo(() => {\n    const { shared = {}, queries = {}, mutations = {} } = config\n    const {\n      shared: contextShared = {},\n      queries: contextQueries = {},\n      mutations: contextMutations = {},\n    } = configContextValue\n\n    return {\n      shared: {\n        ...contextShared,\n        ...shared,\n      },\n      queries: {\n        ...contextQueries,\n        ...queries,\n      },\n      mutations: {\n        ...contextMutations,\n        ...mutations,\n      },\n    }\n  }, [config, configContextValue])\n\n  React.useEffect(() => {\n    // restore previous config on unmount\n    return () => {\n      defaultConfigRef.current = { ...(configContextValue || DEFAULT_CONFIG) }\n    }\n  }, [configContextValue])\n\n  if (!configContextValue) {\n    defaultConfigRef.current = newConfig\n  }\n\n  return (\n    <configContext.Provider value={newConfig}>\n      {children}\n    </configContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { useConfigContext } from './ReactQueryConfigProvider'\n\nimport {\n  uid,\n  isServer,\n  statusError,\n  statusSuccess,\n  getQueryArgs,\n} from '../core/utils'\n\nexport function useUid() {\n  const ref = React.useRef(null)\n\n  if (ref.current === null) {\n    ref.current = uid()\n  }\n\n  return ref.current\n}\n\nexport function useGetLatest(obj) {\n  const ref = React.useRef()\n  ref.current = obj\n\n  return React.useCallback(() => ref.current, [])\n}\n\nexport function useQueryArgs(args) {\n  const configContext = useConfigContext()\n\n  let [queryKey, config, ...rest] = getQueryArgs(args)\n\n  // Build the final config\n  config = {\n    ...configContext.shared,\n    ...configContext.queries,\n    ...config,\n  }\n\n  return [queryKey, config, ...rest]\n}\n\nexport function useMountedCallback(callback) {\n  const mounted = React.useRef(false)\n\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](() => {\n    mounted.current = true\n    return () => (mounted.current = false)\n  }, [])\n\n  return React.useCallback(\n    (...args) => (mounted.current ? callback(...args) : void 0),\n    [callback]\n  )\n}\n\nexport function handleSuspense(queryInfo) {\n  if (\n    queryInfo.query.config.suspense ||\n    queryInfo.query.config.useErrorBoundary\n  ) {\n    if (\n      queryInfo.query.state.status === statusError &&\n      queryInfo.query.state.throwInErrorBoundary\n    ) {\n      throw queryInfo.error\n    }\n\n    if (\n      queryInfo.query.config.suspense &&\n      queryInfo.status !== statusSuccess &&\n      queryInfo.query.config.enabled\n    ) {\n      queryInfo.query.wasSuspended = true\n      throw queryInfo.query.fetch()\n    }\n  }\n}\n","import React from 'react'\n\nimport { useMountedCallback } from './utils'\nimport { useQueryCache } from './ReactQueryCacheProvider'\n\nexport function useIsFetching() {\n  const queryCache = useQueryCache()\n  const [state, unsafeRerender] = React.useReducer(d => d + 1, 1)\n  const rerender = useMountedCallback(unsafeRerender)\n\n  React.useEffect(() => queryCache.subscribe(rerender), [queryCache, rerender])\n\n  return React.useMemo(() => state && queryCache.isFetching, [\n    queryCache.isFetching,\n    state,\n  ])\n}\n","import React from 'react'\n\n//\n\nimport { useConfigContext } from './ReactQueryConfigProvider'\nimport { useGetLatest, useMountedCallback } from './utils'\nimport {\n  statusIdle,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  Console,\n  uid,\n  noop,\n} from '../core/utils'\n\nconst getDefaultState = () => ({\n  status: statusIdle,\n  data: undefined,\n  error: null,\n})\n\nconst actionReset = {}\nconst actionLoading = {}\nconst actionResolve = {}\nconst actionReject = {}\n\nfunction mutationReducer(state, action) {\n  if (action.type === actionReset) {\n    return getDefaultState()\n  }\n  if (action.type === actionLoading) {\n    return {\n      status: statusLoading,\n    }\n  }\n  if (action.type === actionResolve) {\n    return {\n      status: statusSuccess,\n      data: action.data,\n    }\n  }\n  if (action.type === actionReject) {\n    return {\n      status: statusError,\n      error: action.error,\n    }\n  }\n  throw new Error()\n}\n\nexport function useMutation(mutationFn, config = {}) {\n  const [state, unsafeDispatch] = React.useReducer(\n    mutationReducer,\n    null,\n    getDefaultState\n  )\n\n  const dispatch = useMountedCallback(unsafeDispatch)\n\n  const getMutationFn = useGetLatest(mutationFn)\n\n  const getConfig = useGetLatest({\n    ...useConfigContext().shared,\n    ...useConfigContext().mutations,\n    ...config,\n  })\n\n  const latestMutationRef = React.useRef()\n\n  const mutate = React.useCallback(\n    async (\n      variables,\n      { onSuccess = noop, onError = noop, onSettled = noop, throwOnError } = {}\n    ) => {\n      const config = getConfig()\n\n      const mutationId = uid()\n      latestMutationRef.current = mutationId\n\n      const isLatest = () => latestMutationRef.current === mutationId\n\n      let snapshotValue\n\n      try {\n        dispatch({ type: actionLoading })\n        snapshotValue = await config.onMutate(variables)\n\n        let data = await getMutationFn()(variables)\n\n        if (isLatest()) {\n          dispatch({ type: actionResolve, data })\n        }\n\n        await config.onSuccess(data, variables)\n        await onSuccess(data, variables)\n        await config.onSettled(data, null, variables)\n        await onSettled(data, null, variables)\n\n        return data\n      } catch (error) {\n        Console.error(error)\n        await config.onError(error, variables, snapshotValue)\n        await onError(error, variables, snapshotValue)\n        await config.onSettled(undefined, error, variables, snapshotValue)\n        await onSettled(undefined, error, variables, snapshotValue)\n\n        if (isLatest()) {\n          dispatch({ type: actionReject, error })\n        }\n\n        if (throwOnError ?? config.throwOnError) {\n          throw error\n        }\n      }\n    },\n    [dispatch, getConfig, getMutationFn]\n  )\n\n  const reset = React.useCallback(() => dispatch({ type: actionReset }), [\n    dispatch,\n  ])\n\n  React.useEffect(() => {\n    const { suspense, useErrorBoundary } = getConfig()\n\n    if ((useErrorBoundary ?? suspense) && state.error) {\n      throw state.error\n    }\n  }, [getConfig, state.error])\n\n  return [\n    mutate,\n    {\n      ...state,\n      reset,\n      isIdle: state.status === statusIdle,\n      isLoading: state.status === statusLoading,\n      isSuccess: state.status === statusSuccess,\n      isError: state.status === statusError,\n    },\n  ]\n}\n","import React from 'react'\n\n//\n\nimport { useQueryCache } from './ReactQueryCacheProvider'\nimport { useMountedCallback } from './utils'\n\nexport function useBaseQuery(queryKey, config = {}) {\n  // Make a rerender function\n  const rerender = useMountedCallback(React.useState()[1])\n\n  // Get the query cache\n  const queryCache = useQueryCache()\n\n  // Build the query for use\n  const query = queryCache.buildQuery(queryKey, config)\n\n  // Create a query instance ref\n  const instanceRef = React.useRef()\n\n  // Subscribe to the query when the subscribe function changes\n  React.useEffect(() => {\n    instanceRef.current = query.subscribe(() => rerender({}))\n\n    // Unsubscribe when things change\n    return instanceRef.current.unsubscribe\n  }, [query, rerender])\n\n  // Always update the config\n  React.useEffect(() => {\n    instanceRef.current.updateConfig(config)\n  })\n\n  // Run the instance when the query or enabled change\n  React.useEffect(() => {\n    if (config.enabled && query) {\n      // Just for change detection\n    }\n    instanceRef.current.run()\n  }, [config.enabled, query])\n\n  return {\n    ...query,\n    ...query.state,\n    query,\n  }\n}\n","import { useBaseQuery } from './useBaseQuery'\nimport { useQueryArgs, handleSuspense } from './utils'\n\nexport function useQuery(...args) {\n  const query = useBaseQuery(...useQueryArgs(args))\n\n  handleSuspense(query)\n\n  return query\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { useQueryArgs, handleSuspense } from './utils'\nimport { getStatusBools } from '../core/utils'\n\n// A paginated query is more like a \"lag\" query, which means\n// as the query key changes, we keep the results from the\n// last query and use them as placeholder data in the next one\n// We DON'T use it as initial data though. That's important\nexport function usePaginatedQuery(...args) {\n  let [queryKey, config = {}] = useQueryArgs(args)\n\n  // Keep track of the latest data result\n  const lastDataRef = React.useRef()\n\n  // If latestData is there, don't use initialData\n  if (typeof lastDataRef.current !== 'undefined') {\n    delete config.initialData\n  }\n\n  // Make the query as normal\n  const queryInfo = useBaseQuery(queryKey, config)\n\n  // If the query is disabled, get rid of the latest data\n  if (!queryInfo.query.config.enabled) {\n    lastDataRef.current = undefined\n  }\n\n  // Get the real data and status from the query\n  let { data: latestData, status } = queryInfo\n\n  // If the real query succeeds, and there is data in it,\n  // update the latest data\n  React.useEffect(() => {\n    if (status === 'success' && typeof latestData !== 'undefined') {\n      lastDataRef.current = latestData\n    }\n  }, [latestData, status])\n\n  // Resolved data should be either the real data we're waiting on\n  // or the latest placeholder data\n  let resolvedData = latestData\n  if (typeof resolvedData === 'undefined') {\n    resolvedData = lastDataRef.current\n  }\n\n  // If we have any data at all from either, we\n  // need to make sure the status is success, even though\n  // the real query may still be loading\n  if (typeof resolvedData !== 'undefined') {\n    const overrides = { status: 'success', ...getStatusBools('success') }\n    Object.assign(queryInfo.query.state, overrides)\n    Object.assign(queryInfo, overrides)\n  }\n\n  const paginatedQueryInfo = {\n    ...queryInfo,\n    resolvedData,\n    latestData,\n  }\n\n  handleSuspense(paginatedQueryInfo)\n\n  return paginatedQueryInfo\n}\n","//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { useQueryArgs, handleSuspense } from './utils'\n\nexport function useInfiniteQuery(...args) {\n  let [queryKey, config] = useQueryArgs(args)\n\n  config.infinite = true\n\n  const queryInfo = useBaseQuery(queryKey, config)\n\n  handleSuspense(queryInfo)\n\n  return queryInfo\n}\n"],"names":["statusIdle","statusLoading","statusError","statusSuccess","_uid","uid","cancelledError","isServer","window","noop","identity","d","Console","console","error","warn","log","setConsole","c","functionalUpdate","updater","old","stableStringifyReplacer","_","value","isObject","Object","assign","keys","sort","map","key","stableStringify","obj","JSON","stringify","a","Array","isArray","deepIncludes","b","some","isDocumentVisible","document","visibilityState","undefined","isOnline","navigator","onLine","getQueryArgs","args","queryKey","queryFn","config","slice","rest","deepEqual","length","i","valueOf","prototype","hasOwnProperty","call","getStatusBools","status","isLoading","isSuccess","isError","isIdle","DEFAULT_CONFIG","shared","suspense","queries","queryKeySerializerFn","defaultQueryKeySerializerFn","initialStale","enabled","retry","retryDelay","attemptIndex","Math","min","staleTime","cacheTime","refetchOnWindowFocus","refetchInterval","queryFnParamsFilter","refetchOnMount","isDataEqual","onError","onSuccess","onSettled","useErrorBoundary","mutations","throwOnError","onMutate","defaultConfigRef","current","invalidQueryKey","queryHash","parse","Error","then","direct","Promise","resolve","body","recover","result","e","f","arguments","apply","reject","pact","state","s","v","o","bind","observer","onFulfilled","onRejected","callback","_this","thenable","test","awaitBody","shouldContinue","_resumeAfterBody","_resumeAfterTest","thrown","finalizer","queryCache","makeQueryCache","queryCaches","actionInit","actionFailed","actionMarkStale","actionMarkGC","actionFetch","actionSuccess","actionError","actionSetState","frozen","defaultConfig","globalListeners","configRef","isFetching","notifyGlobalListeners","values","reduce","acc","query","forEach","subscribe","cb","push","splice","indexOf","clear","notify","getQueries","predicate","exact","filter","getQuery","getQueryData","data","removeQueries","cancelQueries","cancel","invalidateQueries","refetchActive","refetchInactive","all","instances","instance","fetch","invalidate","err","resetErrorBoundaries","throwInErrorBoundary","buildQuery","userQueryKey","makeQuery","infinite","canFetchMore","getFetchMore","pageVariables","scheduleStaleTimeout","heal","scheduleGarbageCollection","setTimeout","fallbackInstance","prefetchQuery","force","isStale","setQueryData","setData","initialData","hasInitialData","initialStatus","queryReducer","type","dispatch","action","onStateUpdate","clearTimeout","staleTimeout","Infinity","cacheTimeout","markedForGarbageCollection","refetch","cancelled","cancelPromises","promise","clearIntervals","clearInterval","setState","retryTimeout","id","refetchIntervalId","updateConfig","oldConfig","minInterval","setInterval","refetchIntervalInBackground","run","wasSuspended","unsubscribe","tryFetchData","fn","shouldContinueRetryOnFocus","failureCount","delay","fetchMore","originalQueryFn","rebuiltPageVariables","shift","nextCursor","pageArgs","fetchMoreInfo","previous","isFetchingMore","newArgs","newData","getCallbackInstances","callbackInstances","unshift","newState","switchActions","updatedAt","Date","now","visibilityChangeEvent","focusEvent","onWindowFocus","catch","removePreviousHandler","setFocusHandler","handleFocus","addEventListener","removeEventListener","queryCacheContext","React","createContext","useQueryCache","useContext","ReactQueryCacheProvider","children","resolvedQueryCache","useMemo","useEffect","configContext","useConfigContext","ReactQueryConfigProvider","configContextValue","newConfig","contextShared","contextQueries","contextMutations","useGetLatest","ref","useRef","useCallback","useQueryArgs","useMountedCallback","mounted","handleSuspense","queryInfo","useIsFetching","useReducer","unsafeRerender","rerender","_await","getDefaultState","_catch","actionReset","_async","actionLoading","actionResolve","actionReject","mutationReducer","useMutation","mutationFn","unsafeDispatch","getMutationFn","getConfig","latestMutationRef","mutate","variables","mutationId","isLatest","snapshotValue","reset","useBaseQuery","useState","instanceRef","useQuery","usePaginatedQuery","lastDataRef","latestData","resolvedData","overrides","paginatedQueryInfo","useInfiniteQuery"],"mappings":"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"}